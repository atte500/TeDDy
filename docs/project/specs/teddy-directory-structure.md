# Specification: TeDDy Directory Structure

## 1. Overview

This document defines the official directory and file structure for the `.teddy/` directory, which serves as the central repository for all TeDDy-related data, including sessions, configuration, and long-term memory.

## 2. Top-Level Structure

The `.teddy/` directory is located at the root of the project.

```
.teddy/
├── config.yaml
├── global.context
├── memos.yaml
└── <session_name>/
```

-   **`config.yaml`**: (Optional) User-specific configuration for the `teddy` CLI tool.
-   **`global.context`**: (Optional) A file containing newline-separated paths to be included in the context of *every* session.
-   **`memos.yaml`**: A YAML file for the AI's global, long-term memory.
-   **`<session_name>/`**: Individual session directories.

## 3. Session Directory Structure

Each session is a self-contained directory within `.teddy/`. The session name is a descriptive, kebab-case string provided by the user (e.g., "implement-auth-flow").

```
<session_name>/
├── session.context
└── <turn_number>/
```

-   **`session.context`**: (Optional) A file containing newline-separated paths to be included in the context of *every turn* within this specific session.
-   **`<turn_number>/`**: A directory for each turn in the session, named with a zero-padded integer (e.g., `01`, `02`).

## 4. Turn Directory Structure

Each turn directory contains the artifacts related to a single plan-execute cycle.

```
<turn_number>/
├── input.md
├── meta.yaml
├── plan.md
├── report.md
├── system_prompt.xml
└── turn.context
```

-   **`input.md`**: The AI's complete worldview for the planning phase of this turn. Generated by `teddy context`.
-   **`plan.md`**: The plan generated by the AI for this turn.
-   **`report.md`**: The execution report of this turn's plan.
-   **`meta.yaml`**: A machine-readable ledger that tracks the session's history, including `parent_turn_id`, `caller_turn_id`, and a `creation_timestamp` for chronological sorting.
-   **`plan.md`**: The plan generated by the AI for this turn.
-   **`report.md`**: The execution report of this turn's plan.
-   **`system_prompt.xml`**: The system prompt used for this turn's planning phase.
-   **`turn.context`**: (Optional) A file containing newline-separated paths to be included only in the context for this specific turn.
